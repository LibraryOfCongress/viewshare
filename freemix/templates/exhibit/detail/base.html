{% extends "exhibit/base.html" %}

{% load i18n %}
{% load freemix_helpers %}
{% load exhibit_tags %}
{% load compress %}
{% load exhibit_tags %}
{% load datasource_tags %}
{% block freemix_title %}{% blocktrans %}View Inspector{% endblocktrans %}: {{ object.title }}{% endblock %}

{% block freemix_css %}
{{ block.super }}
{% compress css %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/layout.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/views.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/editor.css"/>
<link href="{{STATIC_URL}}freemix/css/inspector.css" rel="stylesheet" type="text/css" media="screen,projection" />
<link href="{{STATIC_URL}}exhibit/css/embed.css" rel="stylesheet" type="text/css" media="screen,projection" />

{% endcompress %}
{% endblock %}

{% block freemix_js %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}freemix/js/lib/jquery.form.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}exhibit/js/detail.js"></script>

    {% if can_share %}
    {% compress js %}<script type="text/javascript" src="{{ STATIC_URL }}share/js/share_dialog.js"></script>{% endcompress %}
    {% endif %}

{% endblock %}

{% block body %}

<div class="row-fluid">
  
  <div class="span4">    
    
    <div id="exhibit_metadata">
      {% include "exhibit/detail/exhibit_metadata.html" %}
    </div>
    
    {% include "exhibit/embed/alert.html" %}

  </div> <!-- end span4 -->

  <div class="span8">
    

    <div class="sharedkey-section widget-well">
      
      <h2>{% blocktrans %}Source Data{% endblocktrans %}</h2>

      <div class="row-fluid">
	<div class="span12">
	  {% datasource_list_item object.source %}
	</div>
      </div>

    </div>

    <div class="sharedkey-section widget-well">
      
      <h2>{% blocktrans %}Embed{% endblocktrans %}</h2>
      
      <div class="row-fluid">
	<div class="span12">

	  <uL class="exhibit_list_items">
	    <li class="exhibit_list_item">
	      <p>{% blocktrans %}Copy the following and paste it into your page where you'd like your data view to be placed.{% endblocktrans %}</p>
	      
	      <input type="text" value="&lt;script id='freemix-embed' src='{{ exhibit_embed_url }}' type='text/javascript'&gt;&lt;/script&gt;"  class="embed-key" readonly="readonly"/>
	     </li>
	  </ul>
	</div>
      </div>

    </div>

    {% if can_share and exhibit.shared_keys.all %}
    <div class="sharedkey-section widget-well">
      
      <h2>{% blocktrans %}Shared Links{% endblocktrans %}</h2>
      
      <ul class="shared_key_list_items">
        {% for key in exhibit.shared_keys.all %}
        {% include "share/shared_key_metadata.html" %}
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>
</div>

{% if can_delete %}
{% include "exhibit/exhibit_delete_dialog.html" %}
{% endif %}

{% if can_share %}
{% include "share/shared_key_delete_dialog.html" %}
{% endif %}
{% new_exhibit %}

{% endblock %}
